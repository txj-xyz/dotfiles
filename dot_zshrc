# Autocomplete (possibly broken for Z shell)
autoload -U compinit && compinit

# Load Oh-My-ZSH settings.
export ZSH="$HOME/.oh-my-zsh"

# ZSH Themes / Settings
ZSH_THEME="agnoster"
ZSH_DISABLE_COMPFIX=true

# Autoupdate OMZ
zstyle ':omz:update' mode auto

# Plugins Enabled for OMZ
plugins=(git)

# Load OMZ now.
source $ZSH/oh-my-zsh.sh

# Load ENV settings and tweaks
export EDITOR=nvim
export HOMEBREW_NO_ENV_HINTS=1


# --- Aliases / PATH Exports ---
if [[ "$(uname -s)" -eq "Darwin" ]]; then
  # Mac
  alias q='exit';
  alias cdd='cd $(find . -type d ! -path "*/Library/*" -o -prune | fzf --preview "ls -la {}")'
  alias c='clear'
  alias nvimd='nvim $(find * -type d | fzf)'
  alias nvimf='nvim $(fzf)'
  alias gs='git status'
  alias gc='git commit'
  alias gp='git push'

  # Mac PATH
  export NVM_DIR="$HOME/.nvm"
  [ -s "/opt/homebrew/opt/nvm/nvm.sh" ] && \. "/opt/homebrew/opt/nvm/nvm.sh"
  [ -s "/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm" ] && \. "/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm"
else
  # Linux
  export PATH=$PATH:/usr/local/go/bin
fi


# ZSH Plugins via Brew CLI
if [[ "$(uname -s)" -eq "Darwin" ]]; then
  source $(brew --prefix)/share/zsh-autosuggestions/zsh-autosuggestions.zsh
  source $(brew --prefix)/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
fi


# Autoprint neofetch if its found
[ -x "$(command -v fastfetch)" ] && fastfetch

